(this["webpackJsonpcoachred-react"]=this["webpackJsonpcoachred-react"]||[]).push([[0],{30:function(e,t,a){e.exports=a(49)},49:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(27),r=a(2),o=a(3),l=a(5),c=a(4),d=a(16),u=a(6),p=a(11),h=a.n(p),m=a(13),f=a(1),b=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n.getLocation=n.getLocation.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"getLocation",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var a={longitude:t.coords.longitude,latitude:t.coords.latitude};e.props.updateParent(a)}))}},{key:"render",value:function(){return this.props.fieldData?n.createElement("div",{className:"locationField"},n.createElement("label",{htmlFor:"locationField"},"Location:"),n.createElement("p",null,this.props.fieldData.latitude,", ",this.props.fieldData.longitude),n.createElement("button",{onClick:this.getLocation,className:"btn btn-danger"},"Get Location")):n.createElement("div",{className:"locationField"},n.createElement("label",{htmlFor:"locationField"},"Location:"),n.createElement("p",null),n.createElement("button",{onClick:this.getLocation,className:"btn btn-danger"},"Get Location"))}}]),a}(n.Component),v=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).sports=void 0,n.state={dropdownVisible:!1,fieldData:""},n.sports=[],n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/sport",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.sports=t.data.sports.map((function(e){return e.name})),e.setState({fieldData:e.sports[0]}),e.changeOption=e.changeOption.bind(e),e.showDropDownItems=e.showDropDownItems.bind(e)}))}},{key:"render",value:function(){var e=this;return n.createElement("div",{className:"dropdownContainer"},n.createElement("label",{htmlFor:this.props.fieldName},this.props.label),n.createElement("div",{id:this.props.fieldName,className:"dropdown"},n.createElement("div",{className:"selectedItem btn btn-danger dropdown-toggle",onClick:function(t){return e.showDropDownItems(t)}},this.state.fieldData),this.state.dropdownVisible&&n.createElement("div",{className:"dropdownItems"},this.sports.map((function(t){return n.createElement("div",{className:"dropdownItem",key:e.sports.findIndex((function(e){return e===t})),onClick:function(a){return e.changeOption(a,t)}},t)})))))}},{key:"changeOption",value:function(e,t){e.preventDefault(),this.setState({dropdownVisible:!1,fieldData:t}),this.props.updateParent(t)}},{key:"showDropDownItems",value:function(e){e.preventDefault();var t=!this.state.dropdownVisible;this.setState({dropdownVisible:t})}}]),a}(n.Component),g=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).textInputChange=n.textInputChange.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"textInputChange",value:function(e){this.setState({fieldData:e.target.value}),this.props.updateParent(e.target.value)}},{key:"render",value:function(){return n.createElement("div",{className:"formItem"},n.createElement("label",{htmlFor:this.props.fieldName},this.props.label),n.createElement("input",{className:"form-control",type:this.props.inputType,name:this.props.fieldName,id:this.props.fieldName,required:this.props.isRequired,onChange:this.textInputChange}))}}]),a}(n.Component),y=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).textInputChange=n.textInputChange.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"textInputChange",value:function(e){this.setState({fieldData:e.target.value}),this.props.updateParent(e.target.value)}},{key:"render",value:function(){return n.createElement("div",{className:"formItem"},n.createElement("label",{htmlFor:this.props.fieldName},this.props.label),n.createElement("textarea",{className:"form-control",name:this.props.fieldName,id:this.props.fieldName,onChange:this.textInputChange}))}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={postcode:""},n.getLocation=n.getLocation.bind(Object(f.a)(n)),n.postcodeInputChange=n.postcodeInputChange.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"getLocation",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("http://api.postcodes.io/postcodes/".concat(this.state.postcode));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,s={longitude:n.result.longitude,latitude:n.result.latitude},this.props.updateLocation(s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"postcodeInputChange",value:function(e){this.setState({postcode:e.target.value}),this.props.updateParent(e.target.value)}},{key:"render",value:function(){return n.createElement("form",null,n.createElement("label",{htmlFor:"postcode"},"Postcode"),n.createElement("input",{className:"form-control",type:"text",onChange:this.postcodeInputChange,name:"postcode",required:this.props.isRequired}),n.createElement("input",{className:"btn btn-danger",type:"submit",onClick:this.getLocation,value:"Search"}))}}]),a}(n.Component),w=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.createElement("button",{onClick:function(t){return e.props.sendResults(t)},className:"btn btn-danger"},this.props.buttonName)}}]),a}(n.Component),E=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={passwordOne:"",passwordTwo:""},n.passwordOneChange=n.passwordOneChange.bind(Object(f.a)(n)),n.passwordTwoChange=n.passwordTwoChange.bind(Object(f.a)(n)),n.passwordChange=n.passwordChange.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"passwordOneChange",value:function(e){this.setState({passwordOne:e.target.value}),this.passwordChange(e.target.value,this.state.passwordTwo)}},{key:"passwordTwoChange",value:function(e){this.setState({passwordTwo:e.target.value}),this.passwordChange(this.state.passwordOne,e.target.value)}},{key:"passwordChange",value:function(e,t){e===t&&this.validatePassword(e)&&this.props.updateParent(e)}},{key:"validatePassword",value:function(e){return!(!(e.length>8&&e.toUpperCase()!==e&&e.toLowerCase()!==e)||!isNaN(parseFloat(e))&&isFinite(parseFloat(e)))}},{key:"render",value:function(){return n.createElement("div",{className:"passwordContainer"},n.createElement("label",{htmlFor:"passwordOne"},"Enter a Secure Password:"),n.createElement("input",{className:"form-control",type:"password",name:"passwordOne",id:"passwordOne",onChange:this.passwordOneChange,required:!0}),n.createElement("label",{htmlFor:"passwordTwo"},"Confirm Password:"),n.createElement("input",{className:"form-control",type:"password",name:"passwordTwo",id:"passwordTwo",onChange:this.passwordTwoChange,required:!0}),n.createElement("p",null,"Passwords must be at least 8 characters long and must contain one each of: a lowercase letter, an uppercase letter, and a number."))}}]),a}(n.Component),j=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={firstName:"",lastName:"",email:"",phone:"",dob:"",location:null,postcode:"",address1:"",address2:"",town:"",county:"",qualifications:"",yearsCoaching:0,sport:"Rugby",expertise:"",password:""},n.updateFirstName=n.updateFirstName.bind(Object(f.a)(n)),n.updateLastName=n.updateLastName.bind(Object(f.a)(n)),n.updateEmail=n.updateEmail.bind(Object(f.a)(n)),n.updatePhone=n.updatePhone.bind(Object(f.a)(n)),n.updateDateOfBirth=n.updateDateOfBirth.bind(Object(f.a)(n)),n.updateLocation=n.updateLocation.bind(Object(f.a)(n)),n.updatePostcode=n.updatePostcode.bind(Object(f.a)(n)),n.updateAddress1=n.updateAddress1.bind(Object(f.a)(n)),n.updateAddress2=n.updateAddress2.bind(Object(f.a)(n)),n.updateTown=n.updateTown.bind(Object(f.a)(n)),n.updateCounty=n.updateCounty.bind(Object(f.a)(n)),n.updateQualifications=n.updateQualifications.bind(Object(f.a)(n)),n.updateYearsTraining=n.updateYearsTraining.bind(Object(f.a)(n)),n.updateSport=n.updateSport.bind(Object(f.a)(n)),n.updateAreaOfExpertise=n.updateAreaOfExpertise.bind(Object(f.a)(n)),n.updatePassword=n.updatePassword.bind(Object(f.a)(n)),n.sendResults=n.sendResults.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"updateFirstName",value:function(e){this.setState({firstName:e})}},{key:"updateLastName",value:function(e){this.setState({lastName:e})}},{key:"updateEmail",value:function(e){this.setState({email:e})}},{key:"updatePhone",value:function(e){this.setState({phone:e})}},{key:"updateDateOfBirth",value:function(e){this.setState({dob:e})}},{key:"updateLocation",value:function(e){this.setState({location:e})}},{key:"updateAddress1",value:function(e){this.setState({address1:e})}},{key:"updateAddress2",value:function(e){this.setState({address2:e})}},{key:"updateTown",value:function(e){this.setState({town:e})}},{key:"updateCounty",value:function(e){this.setState({county:e})}},{key:"updatePostcode",value:function(e){this.setState({postcode:e})}},{key:"updateQualifications",value:function(e){this.setState({qualifications:e})}},{key:"updateYearsTraining",value:function(e){this.setState({yearsCoaching:e})}},{key:"updateSport",value:function(e){this.setState({sport:e})}},{key:"updateAreaOfExpertise",value:function(e){this.setState({expertise:e})}},{key:"updatePassword",value:function(e){this.setState({password:e})}},{key:"sendResults",value:function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("http://localhost:3000/coach",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state)});case 3:window.location.href="/coachLogin";case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.createElement("div",{className:"root"},n.createElement("h1",{className:"pageHeading"},"Welcome to Coach Red!"),n.createElement("p",null,"To register as a coach, there are a few details we need from you"),n.createElement(g,{label:"First Name",fieldName:"firstName",fieldData:this.state.firstName,inputType:"text",isRequired:!0,updateParent:this.updateFirstName}),n.createElement(g,{label:"Last Name",fieldName:"lastName",fieldData:this.state.lastName,inputType:"text",isRequired:!0,updateParent:this.updateLastName}),n.createElement(g,{label:"Email Address",fieldName:"email",fieldData:this.state.email,inputType:"text",isRequired:!0,updateParent:this.updateEmail}),n.createElement(g,{label:"Phone Number",fieldName:"phone",fieldData:this.state.phone,inputType:"tel",isRequired:!0,updateParent:this.updatePhone}),n.createElement(g,{label:"Date of Birth",fieldName:"dateOfBirth",fieldData:this.state.dob,inputType:"date",isRequired:!0,updateParent:this.updateDateOfBirth}),n.createElement(b,{updateParent:this.updateLocation,fieldData:this.state.location}),n.createElement(O,{updateLocation:this.updateLocation,updateParent:this.updatePostcode,isRequired:!0}),n.createElement(g,{label:"Address Line 1:",fieldName:"addressOne",fieldData:this.state.address1,inputType:"text",isRequired:!0,updateParent:this.updateAddress1}),n.createElement(g,{label:"Address Line 2:",fieldName:"addressTwo",fieldData:this.state.address2,inputType:"text",isRequired:!1,updateParent:this.updateAddress2}),n.createElement(g,{label:"City",fieldName:"town",fieldData:this.state.town,inputType:"text",isRequired:!0,updateParent:this.updateTown}),n.createElement(g,{label:"County",fieldName:"county",fieldData:this.state.county,inputType:"text",isRequired:!0,updateParent:this.updateCounty}),n.createElement(y,{label:"Tell us about you and your qualifications",fieldName:"qualifications",fieldData:this.state.qualifications,updateParent:this.updateQualifications}),n.createElement(g,{label:"How long have you been coaching?",fieldName:"yearsTraining",fieldData:this.state.yearsCoaching,inputType:"number",isRequired:!0,updateParent:this.updateYearsTraining}),n.createElement(v,{label:"What sport will you be coaching?",fieldName:"sport",updateParent:this.updateSport}),n.createElement(g,{label:"What's your area of expertise?",fieldName:"areaOfExpertise",fieldData:this.state.expertise,inputType:"text",isRequired:!0,updateParent:this.updateAreaOfExpertise}),n.createElement(E,{updateParent:this.updatePassword}),n.createElement(w,{sendResults:this.sendResults,buttonName:"Register!"}))}}]),a}(n.Component),N=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).updateEmailAddress=function(e){n.setState({email:e})},n.updatePassword=function(e){n.setState({password:e})},n.sendResults=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("http://localhost:3000/coach/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.state)});case 3:return a=e.sent,e.next=6,a.json();case 6:"success"===(s=e.sent).status?(localStorage.setItem("coachRedToken",s.data.token),window.location.href="/coachAvailibility"):alert("no chance");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",password:""},n}return Object(o.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"root"},n.createElement(g,{label:"Email Address",fieldName:"emailAddress",fieldData:this.state.email,inputType:"text",isRequired:!0,updateParent:this.updateEmailAddress}),n.createElement(g,{label:"Password",fieldName:"password",fieldData:this.state.password,inputType:"password",isRequired:!1,updateParent:this.updatePassword}),n.createElement(w,{sendResults:this.sendResults,buttonName:"Login"}))}}]),a}(n.Component),k=a(28),C=a.n(k),D=(a(45),function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleDayClick=n.handleDayClick.bind(Object(f.a)(n)),n.state={selectedDay:new Date},n}return Object(o.a)(a,[{key:"handleDayClick",value:function(e){this.setState({selectedDay:e}),this.props.chooseDate(e)}},{key:"render",value:function(){return n.createElement("div",{id:"dayPicker"},n.createElement(C.a,{onDayClick:this.handleDayClick}))}}]),a}(n.Component)),S=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"booking"},n.createElement("span",null,this.props.startTime," - ",this.props.endTime))}}]),a}(n.Component),T=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.createElement("div",{className:"bookings"},this.props.bookings.map((function(t){return n.createElement(S,{key:e.props.bookings.findIndex((function(e){return e===t})),startTime:t.startTime,endTime:t.endTime})})))}}]),a}(n.Component),P=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={dropdownVisible:!1,fieldData:n.props.options[0]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.createElement("div",{className:"dropdownContainer"},n.createElement("label",{htmlFor:this.props.fieldName},this.props.label),n.createElement("div",{id:this.props.fieldName,className:"dropdown"},n.createElement("div",{className:"selectedItem btn btn-danger dropdown-toggle",onClick:function(t){return e.showDropDownItems(t)}},this.state.fieldData),this.state.dropdownVisible&&n.createElement("div",{className:"dropdownItems"},this.props.options.map((function(t){return n.createElement("div",{className:"dropdownItem",key:e.props.options.findIndex((function(e){return e===t})),onClick:function(a){return e.changeOption(a,t)}},t)})))))}},{key:"changeOption",value:function(e,t){e.preventDefault(),this.setState({dropdownVisible:!1,fieldData:t}),this.props.updateParent(t)}},{key:"showDropDownItems",value:function(e){e.preventDefault();var t=!this.state.dropdownVisible;this.setState({dropdownVisible:t})}}]),a}(n.Component),R=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).updateStartTime=function(e){n.setState({startTime:e})},n.updateEndTime=function(e){n.setState({endTime:e})},n.repeat=function(e){n.setState({repeat:e})},n.ageGroup=function(e){n.setState({ageGroup:e})},n.hourlyRate=function(e){n.setState({hourlyRate:e})},n.addSlot=function(){fetch("http://localhost:3000/slot",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+String(localStorage.getItem("coachRedToken"))},body:JSON.stringify(n.state)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("coachRedToken",e.data.token),n.props.toggleModal()}))},n.state={date:n.props.date.toISOString().split("T")[0],startTime:"",endTime:"",repeat:"Once",hourlyRate:0,ageGroup:"Under 18s"},n}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h3",null,"New Time slot for ",this.props.date.toLocaleDateString()),s.a.createElement(g,{label:"Start Time",fieldName:"startTime",fieldData:this.state.startTime,inputType:"time",isRequired:!0,updateParent:this.updateStartTime}),s.a.createElement(g,{label:"End Time",fieldName:"endTime",fieldData:this.state.endTime,inputType:"time",isRequired:!0,updateParent:this.updateEndTime}),s.a.createElement(P,{label:"Repeat?",fieldName:"repeat",updateParent:this.repeat,options:["Once","Weekly","Fortnightly","Monthly"]}),s.a.createElement(P,{label:"Age Group?",fieldName:"age",updateParent:this.ageGroup,options:["Under 18s","Adults"]}),s.a.createElement(g,{label:"Hourly Rate (\xa3)",fieldName:"hourlyRate",fieldData:this.state.hourlyRate,inputType:"number",isRequired:!0,updateParent:this.hourlyRate}),s.a.createElement(w,{sendResults:this.addSlot,buttonName:"Add Slot"}))}}]),a}(n.Component),x=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).updateSelectedDate=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,s,i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({selectedDate:t}),n.setState({isDateSelected:!0}),a=t.toISOString().split("T")[0],s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+String(localStorage.getItem("coachRedToken"))}},e.next=6,fetch("http://localhost:3000/slot/".concat(a),s);case 6:if(403!==(i=e.sent).status){e.next=13;break}return e.t0=console,e.next=11,i.json();case 11:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 13:return e.next=15,i.json();case 15:r=e.sent,localStorage.setItem("coachRedToken",r.data.token),n.setState({bookings:r.data.slots});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.openModal=function(){n.setState({modalDisplay:!0!==n.state.modalDisplay}),n.updateSelectedDate(n.state.selectedDate),n.state.modalDisplay||(window.location.href="#newSlot")},n.state={modalDisplay:!1,selectedDate:new Date,isDateSelected:!1,bookings:[]},n}return Object(o.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"coachAvailibility"},n.createElement("div",{className:"calendar"},n.createElement(D,{chooseDate:this.updateSelectedDate})),n.createElement("div",{className:"bookingsContainer"},n.createElement("div",{className:"bookingList"},!this.state.isDateSelected&&n.createElement("p",null,"Please Select a Date"),this.state.isDateSelected&&n.createElement(T,{bookings:this.state.bookings}),this.state.isDateSelected&&n.createElement("button",{className:"btn btn-danger",onClick:this.openModal},"Add Slot")),n.createElement("div",{id:"newSlot",className:"newSlotModal"},this.state.modalDisplay&&n.createElement(R,{date:this.state.selectedDate,toggleModal:this.openModal}))))}}]),a}(n.Component),I=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-light bg-light"},n.createElement(d.b,{className:"navbar-brand",to:"#"},"Coach Red"),n.createElement("ul",{className:"navbar-nav mr-auto"},n.createElement("li",null,n.createElement(d.b,{className:"nav-link",to:"/registerCoach"},"Register a Coach"))),n.createElement(d.b,{className:"nav-link my-2 my-sm-0",to:"/coachLogin"},"Coach Login"))}}]),a}(n.Component),L=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"page"},n.createElement(d.a,null,n.createElement("div",{className:"nav"},n.createElement(I,null)),n.createElement("div",{className:"container"},n.createElement("div",{className:"row"},n.createElement("div",{className:"pageContent col-10 offset-1 bg-light"},n.createElement(u.c,null,n.createElement(u.a,{path:"/registerCoach",component:j}),n.createElement(u.a,{path:"/coachLogin",component:N}),n.createElement(u.a,{path:"/coachAvailibility",component:x}),n.createElement(u.a,{path:"/",component:j}))))),n.createElement("footer",{className:"footer bg-light"},n.createElement("p",null,n.createElement("small",null,"\xa9 Coach Red 2020")))))}}]),a}(n.Component);i.render(n.createElement(L,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.8bec50d0.chunk.js.map